<% include header.ejs %>
    <div class="jumbotron" id="jumbo">
        <div class="container">
            <h2>Übungen </h2>
        </div>
    </div>
    <div class="container">
        <p>
            <a href="#new_modal" class="btn btn-default" data-toggle="modal"><span class="glyphicon glyphicon-plus"></span> Neue Übung</a>
            </br>
        </p>
        <hr>
        <div class="row">
            <% for(var i=0 ; i < exercises.length; i++) {%>
                <% if ((i % 3==0 ) && (i !=0 )) { %>
        </div>
        <div class="row">
            <% } %>
                <!-- ====UEBUNG INHALT==== -->
                <div class="col-sm-6 col-md-4">
                    <div class="thumbnail">
                        <img src="<%=exercises[i].IMG%>" alt="Bildfehler" id="thumbnailaltern">
                        <div class="caption">
                            <h3><%= exercises[i].Name %></h3>
                            <p>
                                <%var substr=exercises[i].Description.substring(0,200)%>
                                    <%=substr%> ...
                            </p>
                            <p><a href="#<%= exercises[i]._id%>_edit" class="btn btn-primary" role="button" data-toggle="modal">Bearbeiten</a> <a href="#<%= exercises[i]._id%>_delete" class="btn btn-default" role="button" data-toggle="modal">Löschen</a>
                            </p>
                        </div>
                    </div>
                </div>
                <!-- ////UEBUNG INHALT==== -->
                <!-- ====UEBUNG Delete MODAL==== -->
                <div class="modal fade" id="<%= exercises[i]._id%>_delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <h4 class="modal-title" id="myModalLabel"><span class="glyphicon glyphicon-trash"></span> Möchten Sie diese Übung entfernen?</h4>
                            </div>
                            <div class="modal-body">
                                <p><b>Name: </b>
                                    <%=exercises[i].Name%>
                                </p>
                                <p><b>Beschreibung</b>
                                    </br>
                                    <%=exercises[i].Description%>
                                </p>
                                <p><b>Bild: </b>
                                    <a href="<%=exercises[i].IMG%>">
                                        <%=exercises[i].IMG%>
                                    </a>
                                </p>
                            </div>
                            <div class="modal-footer">
                                <form action="/exercises/delete/<%=exercises[i].id%>" method="post">
                                    <button type="button" class="btn btn-default" data-dismiss="modal" id="button">Abbrechen</button>
                                    <button type="submit" class="btn btn-danger">Entfernen</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ////UEBUNG Delete MODAL==== -->
                <!-- ====UEBUNG Update MODAL==== -->
                <form action="/exercises/edit/<%=exercises[i].id%>" method="post">
                    <div class="modal fade" id="<%= exercises[i]._id%>_edit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    <h4 class="modal-title" id="myModalLabel"><span class="glyphicon glyphicon-pencil"></span> Übung bearbeiten</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="form-group">
                                        <label>Name</label>
                                        <input type="text" class="form-control" name="Name" value="<%=exercises[i].Name%>">
                                    </div>
                                    <div class="form-group">
                                        <label>Beschreibung</label>
                                        <textarea type="text" class="form-control" name="Description" value="<%=exercises[i].Description%>"><%=exercises[i].Description%></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label>Image Link</label>
                                        <input type="text" class="form-control" name="IMG" value="<%=exercises[i].IMG%>">
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Abbrechen</button>
                                    <button type="submit" class="btn btn-primary">Speichern</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <!-- ////UEBUNG Update MODAL==== -->
                <% } %>
        </div>
    </div>

    <form action="/exercises/add" method="post">
        <div class="modal fade" id="new_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="myModalLabel"><span class="glyphicon glyphicon-plus"></span> Neue Übung</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>Name</label>
                            <input type="text" class="form-control" name="Name">
                        </div>
                        <div class="form-group">
                            <label>Beschreibung</label>
                            <textarea type="text" class="form-control" name="Description"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Image Link</label>
                            <input type="text" class="form-control" name="IMG">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal" id="button">Abbrechen</button>
                        <button type="submit" class="btn btn-primary">Erstelle Übung</button>

                    </div>
                </div>
            </div>
        </div>
    </form>

    <script type="text/javascript" src="//code.jquery.com/jquery-2.1.3.min.js"></script>
    <script type="text/javascript" src="/javascript/bootstrap.js"></script>
    </body>

    </html>